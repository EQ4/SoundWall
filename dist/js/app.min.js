/*
 soundwall 2014-04-25 
*/
$(function(){function a(){q=!1;for(var a=$("#grid"),b=0;j>b;b++)for(var c=0;i>c;c++){var d=$("<iframe/>").attr("id","widget"+b+c);d.addClass("song"),d.attr("frameborder","0"),d.width(m),d.height(n),a.append(d),p.push(d)}}function b(){$(".song").remove(),o=[]}function c(a){a.shiftKey&&76==a.which&&(q=!q)}function d(c){b(),a(),alertify.success("Hover to unmute player. Use <code>Shift + L</code> to lock and unlock current player.",1e4),SC.get("/tracks",{q:c,limit:5*i*j},function(a){a.sort(function(){return.5-Math.random()}),e(a)})}function e(a){for(var b=$(".song"),c=0;c<b.length;c++){var d=b[c];d.src="http://w.soundcloud.com/player/?url=https://soundcloud.com/partyomo/partynextdoor-west-district";var e=SC.Widget(d);f(e),o.push(e),e.load(a[c].uri,{auto_play:!0,buying:!1,liking:!1,sharing:!1,show_playcount:!1,show_comments:!1,single_active:!1,show_user:!1})}}function f(a){a.bind(SC.Widget.Events.READY,function(){console.log("setting volume to 0"),a.setVolume(0)})}function g(a,b){var c,d=$(".song");if(0>a||0>b)for(c=0;c<d.length;c++)d.eq(c).hasClass("active")&&d.eq(c).removeClass("active");else for(c=0;c<d.length;c++)c!=a*i+b?(o[c].setVolume(0),d.eq(c).hasClass("active")&&d.eq(c).removeClass("active")):(d.eq(c).addClass("active"),o[c].setVolume(100))}$(document).height($(window).height());var h="5371eb9743a8c619876d4e967d558f82",i=2,j=3,k=-1,l=-1,m=$("#grid").width()/i-5,n=$("#grid").height()/j-25,o=[],p=[],q=!1;SC.initialize({client_id:h}),d("armin van buuren"),$("#searchterm").keypress(function(a){if(13==a.which){ga("send","event","input","search"),a.preventDefault();var b=$("#searchterm").val();d(b)}}),$(window).keypress(function(a){ga("send","event","input","locking"),c(a)}),$("#grid").mouseover(function(a){if(!q){ga("send","event","input","playtrack");var b=a.clientX,c=a.clientY-$("#search").height(),d=Math.max(Math.min(Math.floor(c/n),j-1),0),e=Math.min(Math.floor(b/m),i-1);o[d*i+e].setVolume(100),p[d*i+e].addClass("active"),g(d,e),k=d,l=e}})});