/*
 soundwall 2014-04-30 
*/
$(function(){function a(){r=!1;for(var a=$("#grid"),b=0;k>b;b++)for(var c=0;j>c;c++){var d=$("<iframe/>").attr("id","widget"+b+c);d.addClass("song"),d.attr("frameborder","0"),d.width(n),d.height(o),a.append(d),q.push(d)}}function b(){$(".song").remove(),p=[]}function c(a){a.shiftKey&&76==a.which&&(r=!r)}function d(c){b(),a(),SC.get("/tracks",{q:c,limit:5*j*k},function(a){a.sort(function(){return.5-Math.random()}),e(a)})}function e(a){var b=$(".song");h=Math.min(b.length,a.length);for(var c=0;h>c;c++){var d=b[c];d.src="http://w.soundcloud.com/player/?url=https://soundcloud.com/partyomo/partynextdoor-west-district";var e=SC.Widget(d);f(e),p.push(e),e.load(a[c].uri,{auto_play:!0,buying:!1,liking:!1,sharing:!1,show_playcount:!1,show_comments:!1,single_active:!1,show_user:!1})}}function f(a){a.bind(SC.Widget.Events.READY,function(){console.log("setting volume to 0"),a.setVolume(0),a.bind(SC.Widget.Events.FINISH,function(){a.skip(0).seekTo(0),a.play()})})}function g(a,b){var c,d=$(".song");if(0>a||0>b)for(c=0;c<d.length;c++)d.eq(c).hasClass("active")&&d.eq(c).removeClass("active");else for(c=0;c<d.length;c++)c!=a*j+b&&p[c]?(p[c].setVolume(0),d.eq(c).hasClass("active")&&d.eq(c).removeClass("active")):p[c]&&(d.eq(c).addClass("active"),p[c].setVolume(100))}$(document).height($(window).height()),$("#intro-modal").modal("show");var h,i="5371eb9743a8c619876d4e967d558f82",j=2,k=3,l=-1,m=-1,n=$("#grid").width()/j-5,o=$("#grid").height()/k-25,p=[],q=[],r=!1;SC.initialize({client_id:i}),$("#intro-modal").on("hide.bs.modal",function(){d("armin van buuren")}),$("#searchterm").keypress(function(a){if(13==a.which){ga("send","event","input","search"),a.preventDefault();var b=$("#searchterm").val();d(b)}}),$(window).keypress(function(a){ga("send","event","input","locking"),c(a)}),$("#grid").mouseover(function(a){if(!r){ga("send","event","input","playtrack");var b=a.clientX,c=a.clientY-$("#search").height(),d=Math.max(Math.min(Math.floor(c/o),k-1),0),e=Math.min(Math.floor(b/n),j-1);p[d*j+e].setVolume(100),q[d*j+e].addClass("active"),g(d,e),l=d,m=e}})});